<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTPS for OwnCloud | MetaBase Image Guide</title>
    <meta name="description" content="Just playing around">
    
    
    <link rel="preload" href="/assets/css/0.styles.ce17034d.css" as="style"><link rel="preload" href="/assets/js/app.5bef3c73.js" as="script"><link rel="preload" href="/assets/js/2.a9bd2ee6.js" as="script"><link rel="preload" href="/assets/js/15.44d8ba39.js" as="script"><link rel="prefetch" href="/assets/js/10.921c7d6d.js"><link rel="prefetch" href="/assets/js/11.49514a4f.js"><link rel="prefetch" href="/assets/js/12.7926862d.js"><link rel="prefetch" href="/assets/js/13.db6b08b1.js"><link rel="prefetch" href="/assets/js/14.9f7ab85d.js"><link rel="prefetch" href="/assets/js/16.6f2187dc.js"><link rel="prefetch" href="/assets/js/17.02a89803.js"><link rel="prefetch" href="/assets/js/18.2b343b2f.js"><link rel="prefetch" href="/assets/js/19.60f9818b.js"><link rel="prefetch" href="/assets/js/20.40e372bb.js"><link rel="prefetch" href="/assets/js/21.821ee727.js"><link rel="prefetch" href="/assets/js/22.3022ab29.js"><link rel="prefetch" href="/assets/js/23.6ce9420a.js"><link rel="prefetch" href="/assets/js/24.3a5e0e25.js"><link rel="prefetch" href="/assets/js/25.da53f94f.js"><link rel="prefetch" href="/assets/js/3.0d6587c8.js"><link rel="prefetch" href="/assets/js/4.b72cfc44.js"><link rel="prefetch" href="/assets/js/5.553608d1.js"><link rel="prefetch" href="/assets/js/6.346c87d9.js"><link rel="prefetch" href="/assets/js/7.8a99a24e.js"><link rel="prefetch" href="/assets/js/8.db7d9e45.js"><link rel="prefetch" href="/assets/js/9.21bce3b7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ce17034d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">MetaBase Image Guide</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh/" class="nav-link">中文</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">English</a></li><li class="dropdown-item"><!----> <a href="/zh/" class="nav-link">中文</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/overview.html" class="sidebar-link">Overview</a></li><li><a href="/stack-installation.html" class="sidebar-link">Getting Started with OwnCloud</a></li><li><a href="/stack-components.html" class="sidebar-link">List Included Components</a></li><li><a href="/stack-accounts.html" class="sidebar-link">Administrator Usernames and Passwords</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Best Practices</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/solution-smtp.html" class="sidebar-link">OwnCloud send mail by SMTP</a></li><li><a href="/solution-https.html" class="active sidebar-link">HTTPS for OwnCloud</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/solution-https.html#configuration-method-1-using-your-own-certificate" class="sidebar-link">Configuration Method 1: Using your own certificate</a></li><li class="sidebar-sub-header"><a href="/solution-https.html#configuration-method-2-using-let-s-encrypt" class="sidebar-link">Configuration Method 2: Using Let's Encrypt</a></li><li class="sidebar-sub-header"><a href="/solution-https.html#faq" class="sidebar-link">FAQ</a></li></ul></li><li><a href="/solution-dns.html" class="sidebar-link">Domain Name</a></li><li><a href="/solution-migration.html" class="sidebar-link">OwnCloud migrate to data disk</a></li><li><a href="/solution-backup.html" class="sidebar-link">Backup &amp;amp; Restore</a></li><li><a href="/solution-upgrade.html" class="sidebar-link">Upgrade</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Administrator</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/admin-services.html" class="sidebar-link">Start or Stop the Services</a></li><li><a href="/admin-mysql.html" class="sidebar-link">MySQL</a></li><li><a href="/admin-linux.html" class="sidebar-link">Linux</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Configuration on Cloud</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/getimage.html" class="sidebar-link">Get the Images</a></li><li><a href="/cloud-server.html" class="sidebar-link">Using Cloud Server</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Other</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/faq.html" class="sidebar-link">FAQ</a></li><li><a href="/troubleshooting.html" class="sidebar-link">Troubleshooting</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="https-for-owncloud"><a href="#https-for-owncloud" aria-hidden="true" class="header-anchor">#</a> HTTPS for OwnCloud</h1> <p>Websoft9 OwnCloud(LAMP) have enabled the Nginx SSL module, you just need to add the HTTPS profile to vhost configuration file .Before setting up HTTPS access, please open port 443 of the security group. if not, HTTPS access is not available.</p> <p>Here are two configuration schemes for HTTPS, please choose according to the actual situation:</p> <p><a name="f7f3b410"></a></p> <h2 id="configuration-method-1-using-your-own-certificate"><a href="#configuration-method-1-using-your-own-certificate" aria-hidden="true" class="header-anchor">#</a> Configuration Method 1: Using your own certificate</h2> <p>If you have already applied for a certificate (please ensure that the certificate is available), please refer to the following configuration:</p> <ol><li>Upload the certificate to the certificate Directory: <em>/data/cert</em> (no cert directory can be created by yourself)</li> <li>Copy the HTTPS profile template below into the <em><code>vhost.conf</code></em> file and save</li></ol> <div class="language-shell extra-class"><pre class="language-text"><code>&lt;VirtualHost *:443&gt;
ServerName  www.mydomain.com
DocumentRoot &quot;/data/wwwroot/owncloud&quot;
#ErrorLog &quot;logs/www.mydomain.com-error_log&quot;
#CustomLog &quot;logs/www.mydomain.com-access_log&quot; common
&lt;Directory &quot;/data/wwwroot/owncloud&quot;&gt;
Options Indexes FollowSymlinks
AllowOverride All
Require all granted
&lt;/Directory&gt;
SSLEngine on
SSLCertificateFile  /data/cert/www.mydomain.com.crt
SSLCertificateKeyFile  /data/cert/www.mydomain.com.key
SSLCertificateChainFile  /data/cert/root_bundle.crt
&lt;/VirtualHost&gt;
</code></pre></div><ol start="3"><li>Modify the related items in the configuration file and save
| <strong>Items</strong> | <strong>Description</strong> |
| --- | --- |
| ServerName | Primary domain |
| DocumentRoot | The real website storage directory |
| Directory | The real website storage directory |
| ErrorLog | error logs directory |
| CustomLog | visit logs directory |
| SSLCertificateFile | SSLCertificateFile directory, suffix name is .crt or .pem |
| SSLCertificateKeyFile  | SSLCertificateKeyFile directory, suffix name is .key |
| SSLCertificateChainFile  | SSLCertificateChainFile  directory, suffix name is .cer |</li></ol> <blockquote><p>The incorrect directory will cause the service to fail to restart, view the ErroLog to troubleshoot</p></blockquote> <ol start="3"><li>Restart HTTP Services</li></ol> <div class="language-shell extra-class"><pre class="language-text"><code>#~ systemctl restart httpd
</code></pre></div><p><a name="f09ba4e3"></a></p> <h2 id="configuration-method-2-using-let-s-encrypt"><a href="#configuration-method-2-using-let-s-encrypt" aria-hidden="true" class="header-anchor">#</a> Configuration Method 2: Using Let's Encrypt</h2> <p>You can use the free SSL/TLS Certificate <a href="https://letsencrypt.org/" target="_blank" rel="noopener noreferrer">Let's Encrypt<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> in this Image, Let's Encrypt is a free, automated, and open Certificate Authority.</p> <p>Before using Let's Encrypt Certificate for your site, you should make sure that your site have already bound to the domain name, it's means that the ServerName parameter have correct domain in HTTP profile template.<br>E.g. The domain of your site is test.websoft9.cn, here are the steps to configure the HTTPS:</p> <ol><li>Start up the Let's Encrypt configuration just need one command</li></ol> <div class="language-shell extra-class"><pre class="language-text"><code>certbot
</code></pre></div><ol start="2"><li>Enter the corresponding content according to the prompt</li></ol> <blockquote><p>You can select multiple domain by the method 1,2 when come to the step &quot;Which names would you like to activate HTTPS for?&quot;</p></blockquote> <ol start="3"><li><p>After the above steps are completed, certbot will automatically configure the certificate to the directory <em>/etc/letsencrypt/live/</em></p></li> <li><p>Visit the HTTPS to confirm you have configured successfully</p></li></ol> <hr> <p><a name="FAQ"></a></p> <h2 id="faq"><a href="#faq" aria-hidden="true" class="header-anchor">#</a> FAQ</h2> <p><a name="aa9423d7"></a></p> <h3 id="note-on-the-application-of-the-certificate"><a href="#note-on-the-application-of-the-certificate" aria-hidden="true" class="header-anchor">#</a> Note on the application of the certificate</h3> <ul><li>domain.com is a wildcard domain name method and cannot be used to apply for a free certificate</li> <li>When applying for a certificate, please resolve the domain name first. some certificates will bind the IP address corresponding to the domain name, that is, the IP address cannot be replaced once applied, otherwise the certificate will not be available</li></ul> <p><a name="cb873aa0"></a></p> <h3 id="why-is-the-setup-successful-showing-the-connection-established-with-this-site-is-not-completely-secure"><a href="#why-is-the-setup-successful-showing-the-connection-established-with-this-site-is-not-completely-secure" aria-hidden="true" class="header-anchor">#</a> Why is the setup successful, showing &quot;the connection established with this site is not completely secure &quot;?</h3> <p>If https can be visited, you can make sure that your HTTPS settings are successful, just because there are static files containing http access, or external links, etc. in the website, the browser alarms that your website is not completely safe.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/solution-smtp.html" class="prev">
          OwnCloud send mail by SMTP
        </a></span> <span class="next"><a href="/solution-dns.html">
          Domain Name
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5bef3c73.js" defer></script><script src="/assets/js/2.a9bd2ee6.js" defer></script><script src="/assets/js/15.44d8ba39.js" defer></script>
  </body>
</html>
